language: go
sudo: false
go:
  - 1.10.2
addons:
  apt:
    packages:
      rpm
install:
  - gem install fpm
  - npm install -g snyk
script:
  - make travis
after_success:
  - bash <(curl -s https://codecov.io/bash)
  - snyk test
deploy:
  - provider: packagecloud
    username: AlexAkulov
    repository: hungryfox-unstable
    token: $PACKAGECLOUD_TOKEN
    package_glob: build/hungryfox*.rpm
    dist: centos/7
  - provider: packagecloud
    username: AlexAkulov
    repository: hungryfox-unstable
    token: $PACKAGECLOUD_TOKEN
    package_glob: build/hungryfox*.deb
